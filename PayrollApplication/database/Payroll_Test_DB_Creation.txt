DROP SCHEMA IF EXISTS Payroll_Test;

CREATE SCHEMA Payroll_Test;

USE Payroll_Test;

CREATE TABLE Account
    (Account_Id int NOT NULL AUTO_INCREMENT,
    Name varchar(64) CHARACTER SET utf8 NOT NULL,
    Email varchar(128) CHARACTER SET utf8 NOT NULL,
    Access_Token varchar(256) CHARACTER SET utf8 NOT NULL,
    PRIMARY KEY (Account_Id));

CREATE TABLE Employee
    (Account_Id int NOT NULL,
    Emp_Id int NOT NULL AUTO_INCREMENT,
    First_Name varchar(20) CHARACTER SET utf8 NOT NULL,
    Last_Name varchar(20) CHARACTER SET utf8 NOT NULL,
    Phone_Num varchar(20) CHARACTER SET utf8,
    Hourly_Employee boolean,
    Salary_Employee boolean,
    PRIMARY KEY (Emp_Id),
    FOREIGN KEY (Account_Id) REFERENCES Account(Account_Id)
		ON DELETE CASCADE ON UPDATE CASCADE);

CREATE TABLE Hourly_Employee
    (Account_Id int NOT NULL,
    Emp_Id int NOT NULL,
    Rate int NOT NULL,
    PRIMARY KEY (Emp_Id),
    FOREIGN KEY (Account_Id) REFERENCES Account(Account_Id)
	        ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (Emp_Id) REFERENCES Employee(Emp_Id)
		ON DELETE CASCADE ON UPDATE CASCADE);

CREATE TABLE Salary_Employee
    (Account_Id int NOT NULL,
    Emp_Id int NOT NULL,
    Base_Salary int NOT NULL,
    PRIMARY KEY (Emp_Id),
    FOREIGN KEY (Account_Id) REFERENCES Account(Account_Id)
	        ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (Emp_Id) REFERENCES Employee(Emp_Id)
		ON DELETE CASCADE ON UPDATE CASCADE);

CREATE TABLE Pay_Period
    (Account_Id int NOT NULL,
    Period_Id int NOT NULL AUTO_INCREMENT,
    Start_Date date NOT NULL,
    End_Date date NOT NULL,
    PRIMARY KEY (Period_Id),
    FOREIGN KEY (Account_Id) REFERENCES Account(Account_Id)
	        ON DELETE CASCADE ON UPDATE CASCADE);

CREATE TABLE Timecard
    (Account_Id int NOT NULL,
    Emp_Id int NOT NULL,
    Period_Id int NOT NULL,
    Regular_Hours int,
    Overtime_Hours int,
    Bonus_Pay int,
    Other_Pay int,
    PRIMARY KEY (Emp_Id, Period_Id),
    FOREIGN KEY (Account_Id) REFERENCES Account(Account_Id)
	        ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (Emp_Id) REFERENCES Employee(Emp_Id)
		ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (Period_Id) REFERENCES Pay_Period(Period_Id)
		ON DELETE CASCADE ON UPDATE CASCADE);